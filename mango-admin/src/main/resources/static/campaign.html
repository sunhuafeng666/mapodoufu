<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link href="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="laydate/theme/default/laydate.css" media="all">
    <title>麻婆豆腐～</title>
</head>

<body>
    <div class="header">
        <nav class="navbar navbar-dark bg-dark">
            <span class="navbar-brand mb-0 h1">麻婆豆腐ファミリー</span>
            <div class="user-icon">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-person-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path>
                  </svg>
                <span class="user-name"></span>
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-gem" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M3.1.7a.5.5 0 0 1 .4-.2h9a.5.5 0 0 1 .4.2l2.976 3.974c.149.185.156.45.01.644L8.4 15.3a.5.5 0 0 1-.8 0L.1 5.3a.5.5 0 0 1 0-.6l3-4zm11.386 3.785l-1.806-2.41-.776 2.413 2.582-.003zm-3.633.004l.961-2.989H4.186l.963 2.995 5.704-.006zM5.47 5.495l5.062-.005L8 13.366 5.47 5.495zm-1.371-.999l-.78-2.422-1.818 2.425 2.598-.003zM1.499 5.5l2.92-.003 2.193 6.82L1.5 5.5zm7.889 6.817l2.194-6.828 2.929-.003-5.123 6.831z"></path>
                  </svg>
                <span class="user-level"></span>
            </div>
        </nav>
    </div>
    <div class="home container">
        <div class="campaign-banner">
            <h1>testets</h1>
        </div>
        <div class="row row-cols-1 row-cols-md-2" id="campaignTable">
            <!-- <div class="col mb-6">
                <div class="card campaign-card">
                    <button type="button" class="close delete-campaign" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    <div class="card-body">
                        <h5 class="card-title">フル装備ゲットイベント</h5>
                        <p class="card-text">需要巴拉巴拉巴拉</p>
                        <p class="card-text start-time">开始时间: <span>2021-12-01</span></p>
                        <p class="card-text person-num">人数: <span>10</span></p>
                        <div class="member-info">
                            <p>队友一览</p>
                            <ol>
                                <li>www <button type="button" class="close delete-member" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button></li>
                                <li>www<button type="button" class="close delete-member" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button></li>
                                <li>www<button type="button" class="close delete-member" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button></li>
                            </ol>
                        </div>
                        <a href="#" class="btn btn-outline-info apply-bottom">我要报名</a>
                        <a href="#" class="btn btn-outline-info apply-cancel">取消报名</a>
                    </div>
                </div>
            </div> -->
        </div>
    </div>
    <div class="alert alert-warning alert-dismissible fade hide" role="alert" id="warning-msg">
        <strong></strong>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
    </div>
</body>

<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script src="../js/jquery.cookie.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="/laydate/laydate.js"></script>
<script src="../js/everycheck.js"></script>
<script src="../js/campaign.js"></script>
<script>
    function applyCampaign(idnameteamnum) {
        var idnameteamnum = idnameteamnum;
        $.ajax({
            url: '/addStbale',
            type: 'POST',
            data: {
                'idname': $('.campaign-banner h1').text(),
                'idnameteamnum': idnameteamnum,
                'nickname': $('.navbar').find('.user-name').text()
            },
            success: function(data) {
                var responses = data;
                var msgCode = responses.resultId;
                var msgInfo = responses.resultContent;
                if (msgCode == 'N001') {

                    window.location.replace("campaign.html");
                } else {
                    if ($('#creatCampaign').find('.errorCode').length > 0) {
                        $('#creatCampaign').find('.errorCode').remove();
                    }
                    $('#creatCampaign').find('.modal-body').append('<small class="errorCode">' + msgInfo + '</small>');
                }
            },
            error: function(e) {
                $('#warning-msg').find('strong').text('创建失败，再试一次！').show();
                console.log(e.status);
                console.log(e.responseText);
            }
        });

    }

    function cancelCampaign(memberId) {
        deleteMember(memberId);
    }

    function deleteTeamMember(teamMemberId) {
        deleteMember(teamMemberId);
    }

    function deleteMember(memberId) {
        $.ajax({
            url: '/deleteStbale',
            type: 'GET',
            data: {
                'id': memberId
            },
            success: function(data) {
                var responses = data;
                var msgCode = responses.resultId;
                if (msgCode == 'N001') {
                    campaign.selectCampaignInfo();
                } else {
                    $('#warning-msg').find('strong').text('').text('检索失败，再刷新试试！').show();
                }
            },
            error: function(e) {
                console.log(e.status);
                console.log(e.responseText);
            }
        })
    }
</script>